!function(t){"use strict";t.redux=t.redux||{},t(document).ready(function(){t.redux.demo_importer()}),t.redux.demo_importer=function(){t(".wrap-importer.theme.not-imported, #demo-importer-reimport").unbind("click").on("click",function(t){function r(){var t='<div class="demo-progress-back"><div class="demo-progress-bar button-primary"><span class="demo-progress-count">0%</span></div>';o.prepend(t),setTimeout(function(){e(s)},2e3)}function e(t){t.action="redux_demo_importer_progress",0==d?jQuery.ajax({url:ajaxurl,data:t,success:function(r){var i=jQuery.parseJSON(r);if(r.length>0&&"object"==typeof i){var n=Math.floor(i.imported_count/i.total_post*100);n=n>0?n-1:n,o.find(".demo-progress-bar").css("width",n+"%"),o.find(".demo-progress-count").text(n+"%"),setTimeout(function(){e(t)},2e3)}}}):o.find(".demo-progress-back").remove()}t.preventDefault();var o=jQuery(this),i=!1,n="Import Demo Content?";if("demo-importer-reimport"==t.target.id&&(i=!0,n="Re-Import Content?",jQuery(this).hasClass("rendered")||(o=jQuery(this).parents(".wrap-importer"))),!o.hasClass("imported")||0!=i){var a=confirm(n);if(0!=a){1==i&&o.removeClass("active imported").addClass("not-imported"),o.find(".spinner").css("display","inline-block"),o.removeClass("active imported"),o.find(".importer-button").hide();var s=jQuery(this).data(),d=!1;return s.action="redux_demo_importer",s.demo_import_id=o.attr("data-demo-id"),s.nonce=o.attr("data-nonce"),s.type="import-demo-content",s.demo_import=1==i?"re-importing":" ",o.find(".demo_image").css("opacity","0.5"),jQuery.post(ajaxurl,s,function(t){if(o.find(".demo_image").css("opacity","1"),o.find(".spinner").css("display","none"),t.length>0&&t.match(/Have fun!/gi)){if(0==i){o.addClass("rendered").find(".demo-importer-buttons .importer-button").removeClass("import-demo-data");var r='<div id="demo-importer-reimport" class="demo-importer-buttons button-primary import-demo-data importer-button">Re-Import</div>';o.find(".theme-actions .demo-importer-buttons").append(r)}o.find(".importer-button:not(#demo-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),o.find(".importer-button").attr("style",""),o.addClass("imported active").removeClass("not-imported"),d=!0,e(s),location.reload(!0)}else o.find(".import-demo-data").show(),1==i&&(o.find(".importer-button:not(#demo-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),o.find(".importer-button").attr("style",""),o.addClass("imported active").removeClass("not-imported")),d=!0,alert("There was an error importing demo content: \n\n"+t.replace(/(<([^>]+)>)/gi,""))}),r(),!1}}})}}(jQuery);